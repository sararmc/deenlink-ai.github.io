<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DeenLink AI ‚Äî v1.2.1</title>
  <meta name="description" content="DeenLink AI v1.2.1 : Ressources authentiques (affiliation), D√©fi 100 jours, dhikr offline, priorit√©s du jour, PDF Tawhid."/>
  <link rel="manifest" href="./manifest.webmanifest" />
  <meta name="theme-color" content="#7c6af0" />
  <style>
    :root{--bg:#0f0e19;--ink:#f7f5ff;--muted:#bdb6e6;--card:#18162a;--brand:#7c6af0;--gold:#d9b45e;--ok:#21d19f}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--ink);background:
      radial-gradient(1200px 600px at 10% 5%, rgba(217,180,94,.12), transparent 60%),
      radial-gradient(900px 500px at 90% 10%, rgba(124,106,240,.12), transparent 60%),
      #0f0e19;min-height:100dvh;position:relative}
    .stars{position:fixed;inset:0;pointer-events:none;background-image:
      radial-gradient(2px 2px at 20% 30%, rgba(255,255,200,.7), transparent 60%),
      radial-gradient(1.5px 1.5px at 70% 20%, rgba(255,255,220,.5), transparent 60%),
      radial-gradient(1.5px 1.5px at 35% 70%, rgba(255,255,220,.5), transparent 60%),
      radial-gradient(1.5px 1.5px at 80% 60%, rgba(255,255,220,.5), transparent 60%),
      radial-gradient(2px 2px at 50% 40%, rgba(255,240,200,.7), transparent 60%);opacity:.6}
    .wrap{max-width:1020px;margin:auto;padding:26px;position:relative}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    .logo{display:flex;gap:10px;align-items:center}
    .logo span{font-weight:800;font-size:20px;letter-spacing:.2px}
    .nav{display:flex;gap:8px;flex-wrap:wrap}
    .btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;padding:10px 14px;border-radius:12px;border:1px solid #2a2643;background:#1a1730;color:#fff;cursor:pointer;text-decoration:none}
    .btn:hover{transform:translateY(-1px)}
    .primary{background:linear-gradient(90deg,var(--brand),#a99bff);border-color:var(--brand)}
    .gold{background:linear-gradient(90deg,#c9a14d,#e7c56a);border-color:#c9a14d;color:#2a1f08}
    .chip{background:#1b1933;border:1px solid #2a2750;color:var(--muted);padding:6px 10px;border-radius:20px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-top:10px}
    .card{background:linear-gradient(180deg,#19162f,#15132a);border:1px solid #2b2851;border-radius:18px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{font-size:26px;margin:6px 0 4px}
    h2{font-size:18px;margin:0 0 8px;color:#e8e6ff}
    p{margin:6px 0 10px;color:var(--muted);line-height:1.45}
    input,button,textarea{font:inherit}
    .tag{display:inline-block;font-size:12px;color:#a7a1d8}
    .money{color:var(--ok);font-weight:700}
    footer{margin-top:24px;color:#9b95ce;font-size:13px}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:12px}
    .tabs{display:flex;gap:8px;margin:8px 0 14px;flex-wrap:wrap}
    .tab{padding:8px 12px;border-radius:12px;background:#16132b;border:1px solid #2a2646;cursor:pointer}
    .tab.active{background:linear-gradient(90deg,#2a244a,#1c1836);border-color:#3b3566}
    .section{display:none}
    .section.active{display:block}
    .row{display:flex;gap:8px;align-items:end;flex-wrap:wrap}
    .field{padding:8px;border-radius:10px;border:1px solid #2a2e55;background:#11152a;color:#fff;width:110px}
    .center{text-align:center}
    .progress{height:12px;background:#120f25;border:1px solid #3a3366;border-radius:999px;overflow:hidden}
    .bar{height:100%;background:linear-gradient(90deg,#c9a14d,#e7c56a)}
    .pill{padding:6px 10px;border-radius:999px;background:#1b1833;border:1px solid #2d2855;color:#d6d1ff;font-size:12px}
    .input{width:100%;padding:10px;border-radius:12px;border:1px solid #2a2e55;background:#11152a;color:#fff}
    .link{color:#d9b45e;text-decoration:underline}
  </style>
</head>
<body>
<div class="stars"></div>
<div class="wrap">
  <header>
    <div class="logo">
      <img src="./icons/icon-192.png" alt="" width="28" height="28" />
      <span>DeenLink AI</span>
      <span class="pill">v1.2.1</span>
    </div>
    <div class="nav">
      <button id="installBtn" class="btn">Installer</button>
      <a class="btn gold" href="https://www.paypal.com/ncp/payment/B37CADPR9L22L" target="_blank" rel="noopener">Soutenir DeenLink</a>
    </div>
  </header>

  <div class="tabs">
    <div class="tab active" data-tab="home">Accueil</div>
    <div class="tab" data-tab="deen">Deen Tools</div>
    <div class="tab" data-tab="challenge">D√©fi 100 Jours</div>
    <div class="tab" data-tab="ai">Productivit√© & IA</div>
    <div class="tab" data-tab="pdf">PDF Tawhid</div>
    <div class="tab" data-tab="ress">Ressources</div>
    <div class="tab" data-tab="contact">Contact</div>
  </div>

  <!-- Accueil -->
  <section id="home" class="section active">
    <div class="grid">
      <article class="card">
        <h1>Bienvenue üåô</h1>
        <p>DeenLink AI t‚Äôaide chaque jour : dhikr hors‚Äëligne, D√©fi 100 jours, priorit√©s du jour, ressources authentiques, et un guide PDF sur le Tawhid.</p>
        <p class="chip">Z√©ro abonnement ‚Äî h√©bergement gratuit ‚Äî installable</p>
        <h2>Rappel du jour</h2>
        <p id="daily" class="mono">‚Äî</p>
        <button class="btn" id="newDaily">Nouveau rappel</button>
      </article>
      <article class="card center">
        <h2>PDF Tawhid ‚Äî 9,99 ‚Ç¨</h2>
        <p>Guide clair et concis pour comprendre et pratiquer le Tawhid au quotidien.</p>
        <a class="btn gold" href="https://www.paypal.com/ncp/payment/Q45FML6B2FPGS" target="_blank" rel="noopener">Acheter maintenant</a>
        <p class="tag">Paiement s√©curis√© via PayPal / Carte</p>
      </article>
      <article class="card">
        <h2>Calculateur Espresso</h2>
        <p>Parce que la oumma a aussi droit aux bons caf√©s üòÑ</p>
        <div class="row">
          <label> Dose (g)<br><input id="dose" type="number" min="5" max="30" value="18" class="field"></label>
          <label> Ratio<br><input id="ratio" type="number" step="0.1" min="1.0" max="3.0" value="2.0" class="field"></label>
          <button class="btn primary" id="calc">Calculer</button>
        </div>
        <p class="tag">Sortie cible : <span id="out" class="money">36 g</span></p>
      </article>
    </div>
  </section>

  <!-- Deen Tools -->
  <section id="deen" class="section">
    <div class="grid">
      <article class="card center">
        <h2>Compteur Dhikr</h2>
        <p>Compteur simple, hors‚Äëligne. Les donn√©es restent sur ton appareil.</p>
        <div class="row" style="justify-content:center">
          <button class="btn" id="dec">‚àí</button>
          <div class="chip" id="count" aria-live="polite">0</div>
          <button class="btn primary" id="inc">+</button>
        </div>
        <div class="row" style="justify-content:center; margin-top:8px">
          <button class="btn" id="reset">R√©initialiser</button>
          <button class="btn" id="save">Sauvegarder</button>
        </div>
        <p class="tag">Derni√®re sauvegarde : <span id="saved">‚Äî</span></p>
      </article>
      <article class="card">
        <h2>Invocations (al√©atoire)</h2>
        <p id="dua">‚Äî</p>
        <button class="btn" id="nextDua">Nouveau rappel</button>
      </article>
    </div>
  </section>

  <!-- D√©fi 100 Jours -->
  <section id="challenge" class="section">
    <div class="grid">
      <article class="card">
        <h2>Hadith sur la constance</h2>
        <p><em>‚ÄúLes actes les plus aim√©s d‚ÄôAllah sont ceux qui sont constants, m√™me s‚Äôils sont peu.‚Äù</em><br><span class="tag">(Sahih al‚ÄëBukhari, n¬∞ 6464)</span></p>
      </article>
      <article class="card">
        <h2>D√©fi 100 Jours DeenLink</h2>
        <label>üåô Ton objectif<br><input id="goal" class="input" placeholder="Ex.: Lire 1 page de Qur‚Äôan par jour"></label>
        <p class="tag">Progression : <span id="progText">0 / 100</span></p>
        <div class="progress"><div id="bar" class="bar" style="width:0%"></div></div>
        <div class="row" style="margin-top:10px">
          <button class="btn primary" id="doneDay">Jour accompli</button>
          <button class="btn" id="resetGoal">R√©initialiser</button>
        </div>
        <p class="tag">Derni√®re action : <span id="last">‚Äî</span></p>
      </article>
    </div>
  </section>

  <!-- Productivit√© & IA -->
  <section id="ai" class="section">
    <div class="grid">
      <article class="card">
        <h2>Focus Timer (Pomodoro 25‚Äô)</h2>
        <div class="row">
          <button class="btn" id="startPom">D√©marrer</button>
          <button class="btn" id="stopPom">Stop</button>
        </div>
        <p class="tag">Temps restant : <span id="pomLeft">25:00</span></p>
      </article>
      <article class="card">
        <h2>3 Priorit√©s du jour</h2>
        <p>Note tes 3 priorit√©s. Valide quand c‚Äôest fait.</p>
        <div id="priors"></div>
        <div class="row"><button class="btn" id="savePriors">Enregistrer</button></div>
        <p class="tag" id="priorSaved">‚Äî</p>
      </article>
      <article class="card">
        <h2>Note rapide</h2>
        <textarea id="quick" rows="4" class="input" placeholder="Une id√©e, un rappel‚Ä¶"></textarea>
        <div class="row"><button class="btn" id="saveQuick">Enregistrer</button></div>
        <p class="tag" id="quickSaved">‚Äî</p>
      </article>
    </div>
  </section>

  <!-- PDF Tawhid -->
  <section id="pdf" class="section">
    <div class="grid">
      <article class="card">
        <h2>Guide PDF ‚Äî Comprendre et pratiquer le Tawhid</h2>
        <ul>
          <li>Format : PDF (lecture mobile/ordinateur)</li>
          <li>Acc√®s : imm√©diat apr√®s paiement</li>
          <li>Mises √† jour : incluses (tu republies la nouvelle version dans l‚Äôapp)</li>
        </ul>
        <a class="btn gold" href="https://www.paypal.com/ncp/payment/Q45FML6B2FPGS" target="_blank" rel="noopener">Acheter ‚Äî 9,99 ‚Ç¨</a>
        <p class="tag">Besoin d‚Äôaide ? Passe par la page Contact.</p>
      </article>
      <article class="card center">
        <h2>Soutien volontaire</h2>
        <a class="btn gold" href="https://www.paypal.com/ncp/payment/B37CADPR9L22L" target="_blank" rel="noopener">Soutenir DeenLink</a>
      </article>
    </div>
  </section>

  <!-- Ressources (Affiliation) -->
  <section id="ress" class="section">
    <div class="grid">
      <!-- Banner -->
      <img src="./banners/banner-ressources-authentiques-1920x600.png" alt="Ressources authentiques ‚Äì DeenLink AI" style="width:100%;border-radius:18px;margin-bottom:14px;border:1px solid #2b2851;" />
      <article class="card">
        <h2>Livres ‚Äî Tawhid & Fondements</h2>
        <p>R√©f√©rences authentiques recommand√©es.</p>
        <div class="row">
          <a class="btn primary" href="https://www.amazon.fr/s?k=Kitab+at-Tawhid&tag=deenlinkai-21" target="_blank" rel="noopener">Kit√¢b at‚ÄëTawh√Æd</a>
          <a class="btn primary" href="https://www.amazon.fr/s?k=Usul+ath-Thalatha+fran%C3%A7ais&tag=deenlinkai-21" target="_blank" rel="noopener">Les trois fondements</a>
          <a class="btn primary" href="https://www.amazon.fr/s?k=Riyad+as-Salihin+fran%C3%A7ais&tag=deenlinkai-21" target="_blank" rel="noopener">Riy√¢d as‚ÄëS√¢lih√Æn</a>
          <a class="btn" href="https://www.amazon.fr/s?k=Tafsir+Ibn+Kathir+fran%C3%A7ais&tag=deenlinkai-21" target="_blank" rel="noopener">Tafs√Ær Ibn Kath√Ær</a>
        </div>
        <p class="tag">Liens affili√©s ‚Äî merci pour le soutien.</p>
      </article>

      <article class="card">
        <h2>Produits de la Sunnah</h2>
        <p>Utiles, simples, en coh√©rence avec la voie.</p>
        <div class="row">
          <a class="btn primary" href="https://www.amazon.fr/s?k=siwak+miswak+naturel&tag=deenlinkai-21" target="_blank" rel="noopener">Miswak naturel</a>
          <a class="btn primary" href="https://www.amazon.fr/s?k=huile+de+nigelle+press%C3%A9e+%C3%A0+froid&tag=deenlinkai-21" target="_blank" rel="noopener">Huile de nigelle</a>
          <a class="btn" href="https://www.amazon.fr/s?k=miel+brut+non+pasteuris%C3%A9&tag=deenlinkai-21" target="_blank" rel="noopener">Miel brut</a>
        </div>
      </article>

      <article class="card">
        <h2>Accessoires de pri√®re</h2>
        <p>Sobres, sans distractions.</p>
        <div class="row">
          <a class="btn primary" href="https://www.amazon.fr/s?k=tapis+de+pri%C3%A8re+simple+sans+motif&tag=deenlinkai-21" target="_blank" rel="noopener">Tapis simple</a>
          <a class="btn" href="https://www.amazon.fr/s?k=boussole+qibla&tag=deenlinkai-21" target="_blank" rel="noopener">Boussole qibla</a>
          <a class="btn" href="https://www.amazon.fr/s?k=compteur+de+dhikr+manuel&tag=deenlinkai-21" target="_blank" rel="noopener">Compteur manuel</a>
        </div>
      </article>

      <article class="card center">
        <h2>PDF & Dons</h2>
        <p>Tu peux soutenir le projet ou obtenir le guide premium.</p>
        <div class="row" style="justify-content:center">
          <a class="btn gold" href="https://www.paypal.com/ncp/payment/Q45FML6B2FPGS" target="_blank" rel="noopener">Acheter le PDF Tawhid ‚Äî 9,99 ‚Ç¨</a>
          <a class="btn gold" href="https://www.paypal.com/ncp/payment/B37CADPR9L22L" target="_blank" rel="noopener">Soutenir DeenLink</a>
        </div>
      </article>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="section">
    <div class="grid">
      <article class="card">
        <h2>Contact & Suivi</h2>
        <p>Pour toute question, suggestion ou support :</p>
        <p>üìß <a class="link" href="mailto:contact.islamapp@gmail.com">contact.islamapp@gmail.com</a></p>
        <p>üí¨ <a class="btn primary" href="https://t.me/DeenLink" target="_blank" rel="noopener">Rejoindre le canal Telegram</a></p>
        <p class="tag">Reste connect√©e pour les rappels et les mises √† jour.</p>
      </article>
    </div>
  </section>

  <footer>
    <p>DeenLink AI ‚Äî App gratuite, installable, pens√©e pour le bien et la productivit√©.</p>
    <p class="mono">v1.2.1 ‚Äî H√©bergement 0‚Ç¨ (GitHub Pages). Service Worker inclus.</p>
  </footer>
</div>

<script>
  // Tabs
  document.querySelectorAll('.tab').forEach(t=>{t.addEventListener('click', ()=>{
    document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
    t.classList.add('active');
    document.getElementById(t.dataset.tab).classList.add('active');
  });});

  // Home: daily reminder
  const dailyList = [
    "Cherche la constance, pas la perfection.",
    "Commence petit, mais aujourd‚Äôhui.",
    "Le meilleur moment est maintenant.",
    "Un c≈ìur apais√©, une journ√©e apais√©e.",
    "R√©duis le bruit, augmente la sinc√©rit√©."
  ];
  const daily = document.getElementById('daily');
  const newDaily = ()=> daily.textContent = dailyList[Math.floor(Math.random()*dailyList.length)];
  document.getElementById('newDaily').onclick = newDaily; newDaily();

  // Espresso calc
  document.getElementById('calc').addEventListener('click', ()=>{
    const d = parseFloat(dose.value||0), r=parseFloat(ratio.value||0);
    const out = (d>0 && r>0)? (d*r).toFixed(0)+" g" : "‚Äî";
    document.getElementById('out').textContent = out;
  });

  // Deen: dhikr counter
  const countEl = document.getElementById('count'); const savedEl = document.getElementById('saved');
  let c = parseInt(localStorage.getItem('dhikr_count')||'0',10);
  countEl.textContent = c;
  document.getElementById('inc').onclick = ()=>{ c++; countEl.textContent=c; };
  document.getElementById('dec').onclick = ()=>{ c=Math.max(0,c-1); countEl.textContent=c; };
  document.getElementById('reset').onclick = ()=>{ c=0; countEl.textContent=c; };
  document.getElementById('save').onclick = ()=>{ localStorage.setItem('dhikr_count', c); savedEl.textContent = new Date().toLocaleString(); };

  // Deen: dua
  const duas = [
    "Sub·∏•ƒÅnallƒÅh, wal-·∏•amdu lillƒÅh, wa lƒÅ ilƒÅha illa llƒÅh, wa llƒÅhu akbar.",
    "AstaghfirullƒÅh wa at≈´bu ilayh.",
    "AllƒÅhumma ·π£alli  øalƒÅ Mu·∏•ammad wa  øalƒÅ ƒÅli Mu·∏•ammad.",
    "HasbunallƒÅhu wa ni øma l‚Äëwakƒ´l."
  ];
  const duaEl = document.getElementById('dua'); const nextDua = ()=>{ duaEl.textContent = duas[Math.floor(Math.random()*duas.length)]; };
  document.getElementById('nextDua').onclick = nextDua; nextDua();

  // Challenge 100 days
  const goal = document.getElementById('goal'); const progText = document.getElementById('progText'); const bar = document.getElementById('bar'); const last = document.getElementById('last');
  let progress = parseInt(localStorage.getItem('challenge_progress')||'0',10);
  let savedGoal = localStorage.getItem('challenge_goal')||'';
  goal.value = savedGoal; updateChallenge();
  document.getElementById('doneDay').onclick = ()=>{ progress = Math.min(100, progress+1); saveChallenge(); };
  document.getElementById('resetGoal').onclick = ()=>{ progress=0; saveChallenge(); };
  goal.addEventListener('input', ()=>{ savedGoal = goal.value; saveChallenge(false); });
  function saveChallenge(withTime=true){ localStorage.setItem('challenge_progress', progress); localStorage.setItem('challenge_goal', savedGoal); if(withTime) last.textContent = new Date().toLocaleString(); updateChallenge(); }
  function updateChallenge(){ progText.textContent = progress+" / 100"; bar.style.width = progress+"%"; }

  // AI: Pomodoro
  let pomTimer=null, seconds=25*60; const fmt = (s)=> String(Math.floor(s/60)).padStart(2,'0')+':'+String(s%60).padStart(2,'0'); const updatePom = ()=> document.getElementById('pomLeft').textContent = fmt(seconds); updatePom();
  document.getElementById('startPom').onclick = ()=>{ if(pomTimer) return; pomTimer=setInterval(()=>{ seconds--; if(seconds<=0){ clearInterval(pomTimer); pomTimer=null; alert('Bravo ! Pause üòä'); seconds=25*60; } updatePom(); },1000); };
  document.getElementById('stopPom').onclick = ()=>{ clearInterval(pomTimer); pomTimer=null; seconds=25*60; updatePom(); };

  // AI: 3 priorities
  const priorsEl = document.getElementById('priors'); const priorSaved = document.getElementById('priorSaved');
  const stored = JSON.parse(localStorage.getItem('priors')||'["","",""]');
  function renderPriors(){
    priorsEl.innerHTML = "";
    stored.forEach((v,i)=>{
      const row = document.createElement('div'); row.className="row";
      row.innerHTML = `<label>#${i+1}<br><input class="input prior" data-i="${i}" value="${v}"></label>
        <label>Fait ?<br><input type="checkbox" class="priorCheck" data-i="${i}" ${localStorage.getItem('prior_done_'+i)==='1'?'checked':''}></label>`;
      priorsEl.appendChild(row);
    });
  }
  renderPriors();
  document.getElementById('savePriors').onclick = ()=>{ 
    const inputs = document.querySelectorAll('.prior'); 
    const checks = document.querySelectorAll('.priorCheck');
    const vals = []; inputs.forEach(inp=>{ vals.push(inp.value); });
    localStorage.setItem('priors', JSON.stringify(vals));
    checks.forEach(ch=> localStorage.setItem('prior_done_'+ch.dataset.i, ch.checked?'1':'0'));
    priorSaved.textContent = 'Enregistr√© √† '+new Date().toLocaleTimeString();
  };

  // Quick note
  const q = document.getElementById('quick'); q.value = localStorage.getItem('quick_note')||'';
  document.getElementById('saveQuick').onclick = ()=>{ localStorage.setItem('quick_note', q.value); document.getElementById('quickSaved').textContent='Enregistr√© √† '+new Date().toLocaleTimeString(); };

  // PWA install
  let deferredPrompt; const installBtn = document.getElementById('installBtn'); installBtn.style.display='none';
  window.addEventListener('beforeinstallprompt', (e)=>{ e.preventDefault(); deferredPrompt=e; installBtn.style.display='inline-flex'; });
  installBtn.addEventListener('click', async ()=>{ if(!deferredPrompt) return; deferredPrompt.prompt(); await deferredPrompt.userChoice; installBtn.style.display='none'; deferredPrompt=null; });
  if('serviceWorker' in navigator){ window.addEventListener('load', ()=>{ navigator.serviceWorker.register('./sw.js'); }); }
</script>
</body>
</html>
